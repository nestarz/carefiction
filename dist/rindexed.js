!function(){function b(a){(a=a||{}).file=String(a.file||"radata");var c=null;try{a.indexedDB=a.indexedDB||indexedDB}catch(d){}try{if(!a.indexedDB||"file:"==location.protocol){var f={};return(g={}).put=function(d,e,h){f[d]=e,h(null,1)},g.get=function(d,e){e(null,f[d]||void 0)},console.log("Warning: No indexedDB exists to persist data to!"),g}}catch(d){}var g=function(){};return b[a.file]?(console.log("Warning: reusing same IndexedDB store and options as 1st."),b[a.file]):(b[a.file]=g,g.start=function(){var d=indexedDB.open(a.file,1);d.onupgradeneeded=function(e){e.target.result.createObjectStore(a.file)},d.onsuccess=function(){c=d.result},d.onerror=function(e){console.log(e||1)}},g.start(),g.put=function(d,e,h){if(c){var i=c.transaction([a.file],"readwrite"),j=i.objectStore(a.file),k=j.put(e,""+d);k.onsuccess=j.onsuccess=i.onsuccess=function(){h(null,1)},k.onabort=j.onabort=i.onabort=function(l){h(l||"put.tx.abort")},k.onerror=j.onerror=i.onerror=function(l){h(l||"put.tx.error")}}else setTimeout(function(){g.put(d,e,h)},1)},g.get=function(d,e){if(c){var h=c.transaction([a.file],"readonly").objectStore(a.file).get(""+d);h.onsuccess=function(){e(null,h.result)},h.onabort=function(i){e(i||4)},h.onerror=function(i){e(i||5)}}else setTimeout(function(){g.get(d,e)},9)},setInterval(function(){c&&c.close(),c=null,g.start()},15000),g)}if("undefined"!=typeof window)(b.window=window).RindexedDB=b;else try{module.exports=b}catch(a){}try{(b.window.Gun||require("../gun")).on("create",function(a){this.to.next(a),a.opt.store=a.opt.store||b(a.opt)})}catch(a){}}();
